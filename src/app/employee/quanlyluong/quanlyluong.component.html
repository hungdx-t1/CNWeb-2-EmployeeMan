<div class="container mt-4">
  <div class="row mb-3">
    <div class="col-md-6">
      <input
        [(ngModel)]="searchTerm"
        (input)="applyFilter()"
        class="form-control"
        placeholder="üîç T√¨m ki·∫øm theo m√£ ho·∫∑c t√™n nh√¢n vi√™n"
      />
    </div>
  </div>

  <table class="table table-bordered table-hover text-center align-middle">
    <thead class="table-light">
      <tr>
        <th>Employee ID</th>
        <th>H·ªç t√™n</th>
        <th>Ch·ª©c v·ª•</th>
        <th>L∆∞∆°ng/ng√†y</th>
        <th>Ng√†y c√¥ng</th>
        <th>Th∆∞·ªüng</th>
        <th>T·ªïng l∆∞∆°ng</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let emp of filteredEmployees()">
        <td>{{ emp.employeeId }}</td>
        <td>
          <button class="btn btn-link p-0" (click)="selectEmployee(emp)">
            {{ emp.firstName }} {{ emp.lastName }}
          </button>
        </td>
        <td>{{ getPositionName(emp) }}</td>
        <td>
          {{
            salaries[emp.employeeId]
              ? (salaries[emp.employeeId].baseSalary / 30)
              : '...'
            | number: '1.0-0'
          }}
        </td>
        <td>
          {{ workdays[emp.employeeId] ?? '...' }}
        </td>
        <td>
          {{
            isBonusInSelectedMonth(emp.employeeId)
              ? salaries[emp.employeeId]?.bonus
              : 0
            | number: '1.0-0'
          }}
        </td>
        <td class="fw-bold text-success">
          {{ getTotalSalary(emp.employeeId) | number: '1.0-0' }}
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="selectedEmployee">
    <h4 class="mt-4">
      B·∫£ng l∆∞∆°ng chi ti·∫øt: {{ selectedEmployee.firstName }} {{ selectedEmployee.lastName }}
    </h4>
    <table class="table table-sm table-bordered text-center align-middle">
      <thead class="table-light">
        <tr>
          <th>Th√°ng/NƒÉm</th>
          <th>Ng√†y c√¥ng</th>
          <th>L∆∞∆°ng/ng√†y</th>
          <th>Th∆∞·ªüng</th>
          <th>T·ªïng</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of salaryTable">
          <td>{{ row.month }}/{{ row.year }}</td>
          <td>{{ row.daysWorked }}</td>
          <td>{{ row.baseSalary | number: '1.0-0' }}</td>
          <td>{{ row.bonus | number: '1.0-0' }}</td>
          <td>{{ row.total + row.bonus | number: '1.0-0' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
